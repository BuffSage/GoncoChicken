<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Gonco Chicken – Knuspriges Hähnchen in Ellenz-Poltersdorf</title>
<link rel="stylesheet" href="styles.css">
<style>
.consent-overlay{position:fixed;inset:0;background:rgba(0,0,0,.6);display:flex;align-items:center;justify-content:center;z-index:1000;}
.consent-overlay.hidden{display:none;}
.consent-modal{background:#fff;color:#000;padding:1rem 1.5rem;border-radius:6px;max-width:500px;width:90%;max-height:90vh;overflow:auto;box-shadow:0 2px 8px rgba(0,0,0,.3);}
.consent-text{max-height:150px;overflow-y:auto;margin-bottom:1rem;}
.consent-settings{margin-bottom:1rem;}
.consent-settings label{display:block;margin-bottom:.5rem;}
.consent-buttons{display:flex;flex-direction:column;gap:.5rem;}
@media(min-width:480px){.consent-buttons{flex-direction:row;}}
.consent-buttons button{flex:1;padding:.5rem;cursor:pointer;}
.consent-buttons button:focus{outline:2px solid #000;outline-offset:2px;}
footer .cookie-btn{margin-left:1rem;}
</style>
</head>
<body>
<header id="site-header"></header>
<main id="app" class="container"></main>
<footer id="site-footer"></footer>

<script src="header.js"></script>
<script src="footer.js"></script>
<script src="pages/home.js"></script>
<script src="pages/menu.js"></script>
<script src="pages/about.js"></script>
<script src="pages/contact.js"></script>
<script src="pages/impressum.js"></script>
<script>
const state = {
  lang: localStorage.getItem('lang') || 'de',
  theme: localStorage.getItem('theme') || 'dark'
};

const i18n = {
  de: {
    nav: { menu: 'Menü', about: 'Über uns', contact: 'Kontakt', call: 'Anrufen' },
    footer: { allergens: 'Allergene & Zusatzstoffe bitte im Laden erfragen.', impressum: 'Impressum – Datenschutz' },
    home: {
      kicker: 'Ellenz-Poltersdorf • Mosel',
      headline: 'Knuspriges Hähnchen, <br/>frisch & saftig – jeden Tag',
      lead: 'Willkommen bei <strong>Gonco Chicken</strong>. Bei uns gibt’s gold-knuspriges Hähnchen, hausgemachte Saucen und Beilagen, die wirklich satt machen. Perfekt zum Mitnehmen oder zum Genießen vor Ort.',
      btnMenu: 'Zum Menü',
      btnAbout: 'Mehr über uns',
      badgeHours: 'Täglich 11–21 Uhr',
      badgeFresh: 'Frisch frittiert',
      findUs: 'So findest du uns',
      
    },
    menu: {
      title: 'Menü',
      items: [
        { name: 'Classic Fried Chicken', desc: 'Knuspriges Hähnchen – 9,50 €' },
        { name: 'Spicy Wings (8 Stk.)', desc: 'Feurig und knusprig – 8,90 €' },
        { name: 'Chicken Burger', desc: 'Mit Salat & Sauce – 10,50 €' }
      ]
    },
    about: {
      title: 'Über uns',
      lines: [
        'Bei Gonco Chicken dreht sich alles um ehrliches Comfort Food.',
        'Wir arbeiten mit regionalen Lieferanten zusammen.',
        'Unsere Karte ist bewusst kompakt für beste Qualität.'
      ]
    },
    contact: {
      title: 'Kontakt',
      info: 'Moselweinstraße 14B, 56821 Ellenz-Poltersdorf<br>Telefon: 02671 2411502<br>E-Mail: hello@goncochicken.de',
      form: { name: 'Name', email: 'E-Mail', message: 'Nachricht', send: 'Senden' }
    },
    impressum: {
      title: 'Impressum',
      dataTitle: 'Datenschutzerklärung'
    }
  },
  en: {
    nav: { menu: 'Menu', about: 'About', contact: 'Contact', call: 'Call' },
    footer: { allergens: 'Please ask in store for allergens & additives.', impressum: 'Imprint – Privacy' },
    home: {
      kicker: 'Ellenz-Poltersdorf • Mosel',
      headline: 'Crispy chicken, <br/>fresh & juicy – every day',
      lead: 'Welcome to <strong>Gonco Chicken</strong>. We serve golden crispy chicken, homemade sauces and sides that really fill you up. Perfect to take away or enjoy on site.',
      btnMenu: 'View menu',
      btnAbout: 'More about us',
      badgeHours: 'Daily 11am–9pm',
      badgeFresh: 'Freshly fried',
      findUs: 'Find us',

    },
    menu: {
      title: 'Menu',
      items: [
        { name: 'Classic Fried Chicken', desc: 'Crispy chicken – €9.50' },
        { name: 'Spicy Wings (8 pcs)', desc: 'Fiery and crispy – €8.90' },
        { name: 'Chicken Burger', desc: 'With salad & sauce – €10.50' }
      ]
    },
    about: {
      title: 'About us',
      lines: [
        'At Gonco Chicken we focus on honest comfort food.',
        'We work with local suppliers.',
        'Our menu is intentionally compact for top quality.'
      ]
    },
    contact: {
      title: 'Contact',
      info: 'Moselweinstraße 14B, 56821 Ellenz-Poltersdorf<br>Phone: +49 2671 2411502<br>Email: hello@goncochicken.de',
      form: { name: 'Name', email: 'Email', message: 'Message', send: 'Send' }
    },
    impressum: {
      title: 'Imprint',
      dataTitle: 'Privacy Policy'
    }
  }
};

function applyTheme(){
  document.body.classList.toggle('light', state.theme === 'light');
  const btn = document.getElementById('theme-toggle');
  if(btn) btn.textContent = state.theme === 'dark' ? '🌙' : '☀️';
}

function updateLang(){
  document.documentElement.lang = state.lang;
  const btn = document.getElementById('lang-toggle');
  if(btn) btn.textContent = state.lang === 'de' ? 'EN' : 'DE';
}

function initToggles(){
  document.getElementById('theme-toggle').addEventListener('click', () => {
    state.theme = state.theme === 'dark' ? 'light' : 'dark';
    localStorage.setItem('theme', state.theme);
    applyTheme();
  });
  document.getElementById('lang-toggle').addEventListener('click', () => {
    state.lang = state.lang === 'de' ? 'en' : 'de';
    localStorage.setItem('lang', state.lang);
    renderHeader();
    renderFooter();
    updateLang();
    initToggles();
    router();
  });
}

const routes = {
  '': renderHome,
  '#home': renderHome,
  '#menu': renderMenu,
  '#about': renderAbout,
  '#contact': renderContact,
  '#impressum': renderImpressum
};

function router(){
  const hash = location.hash || '';
  document.getElementById('app').innerHTML = '';
  (routes[hash] || renderHome)();
}

window.addEventListener('hashchange', router);
window.addEventListener('load', () => {
  renderHeader();
  renderFooter();
  applyTheme();
  updateLang();
  initToggles();
  router();
});
</script>

<div id="consent-overlay" class="consent-overlay hidden">
  <div id="consent-modal" class="consent-modal" role="dialog" aria-modal="true" aria-labelledby="consent-title" aria-describedby="consent-desc">
    <h2 id="consent-title">Datenschutz-Einstellungen</h2>
    <div id="consent-desc" class="consent-text">
      <p>Wir verwenden Cookies, um unsere Website und unseren Service zu optimieren. Weitere Informationen finden Sie in unserer <a href="/datenschutz">Datenschutzerklärung</a> und <a href="/cookie-policy">Cookie-Richtlinie</a>.</p>
    </div>
    <div id="consent-settings" class="consent-settings" hidden>
      <label><input type="checkbox" id="toggle-analytics"> Analytics</label>
      <label><input type="checkbox" id="toggle-marketing"> Marketing</label>
      <label><input type="checkbox" id="toggle-personalization"> Personalisierung</label>
    </div>
    <div class="consent-buttons">
      <button id="btn-accept-all">AKTIVIEREN</button>
      <button id="btn-necessary">NUR NOTWENDIGE TECHNOLOGIEN</button>
      <button id="btn-customize">EINSTELLUNGEN ÄNDERN</button>
    </div>
  </div>
</div>

<script>
const CONSENT_KEY = 'cookie-consent';
const consentQueue = {};

function getConsent(){
  const raw = localStorage.getItem(CONSENT_KEY);
  return raw ? JSON.parse(raw) : null;
}

function saveConsent(consent){
  consent.timestamp = new Date().toISOString();
  localStorage.setItem(CONSENT_KEY, JSON.stringify(consent));
  window.dispatchEvent(new CustomEvent('consentchange',{detail:consent}));
  Object.keys(consentQueue).forEach(p=>{
    if(consent[p]) (consentQueue[p]||[]).forEach(fn=>fn());
    consentQueue[p]=[];
  });
}

function runWithConsent(purpose, fn){
  const c = getConsent();
  if(c && c[purpose]) fn();
  else {
    consentQueue[purpose] = consentQueue[purpose] || [];
    consentQueue[purpose].push(fn);
  }
}

function initConsent(){
  const overlay = document.getElementById('consent-overlay');
  const settingsDiv = document.getElementById('consent-settings');
  const btnAll = document.getElementById('btn-accept-all');
  const btnNec = document.getElementById('btn-necessary');
  const btnCustom = document.getElementById('btn-customize');
  const chkAnalytics = document.getElementById('toggle-analytics');
  const chkMarketing = document.getElementById('toggle-marketing');
  const chkPersonal = document.getElementById('toggle-personalization');

  let inSettings = false;

  function show(){
    overlay.classList.remove('hidden');
    inSettings = false;
    settingsDiv.hidden = true;
    btnCustom.textContent = 'EINSTELLUNGEN ÄNDERN';
    trapFocus();
    document.addEventListener('keydown', handleKeys);
  }

  function hide(){
    overlay.classList.add('hidden');
    document.removeEventListener('keydown', handleKeys);
  }

  function handleKeys(e){
    if(e.key === 'Escape') hide();
    if(e.key === 'Tab'){
      const focusable = overlay.querySelectorAll('button, [href], input');
      const first = focusable[0];
      const last = focusable[focusable.length-1];
      if(e.shiftKey && document.activeElement === first){
        e.preventDefault();
        last.focus();
      }else if(!e.shiftKey && document.activeElement === last){
        e.preventDefault();
        first.focus();
      }
    }
  }

  function trapFocus(){
    const focusable = overlay.querySelectorAll('button, [href], input');
    if(focusable.length) focusable[0].focus();
  }

  btnAll.addEventListener('click', ()=>{
    saveConsent({necessary:true, analytics:true, marketing:true, personalization:true});
    hide();
  });
  btnNec.addEventListener('click', ()=>{
    saveConsent({necessary:true, analytics:false, marketing:false, personalization:false});
    hide();
  });
  btnCustom.addEventListener('click', ()=>{
    if(!inSettings){
      settingsDiv.hidden = false;
      btnCustom.textContent = 'SPEICHERN';
      chkAnalytics.focus();
      inSettings = true;
    } else {
      saveConsent({
        necessary:true,
        analytics:chkAnalytics.checked,
        marketing:chkMarketing.checked,
        personalization:chkPersonal.checked
      });
      hide();
      inSettings = false;
      btnCustom.textContent = 'EINSTELLUNGEN ÄNDERN';
      settingsDiv.hidden = true;
    }
  });

  const existing = getConsent();
  if(!existing) show();

  const footerBtn = document.getElementById('cookie-settings-btn');
  if(footerBtn) footerBtn.addEventListener('click', show);
}

initConsent();

runWithConsent('analytics', () => {
  const s = document.createElement('script');
  s.src = 'https://example.com/analytics.js';
  s.async = true;
  document.head.appendChild(s);
});
</script>
</body>
</html>
